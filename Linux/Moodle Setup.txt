Using Bitnami's Docker Image of Moodle and MariaDB

////// Links////// 
Docker:
https://github.com/docker/docker-install

MariaDB:
https://hub.docker.com/_/mariadb

Bitnami:
https://bitnami.com/stack/moodle/containers

GitHub:
https://github.com/bitnami/bitnami-docker-moodle#how-to-use-this-image


////// Setup Commands //////

// Optional - Install mysql client on the host server. //
apt install mysql-client-core-5.7
apt install mariadb-client-core-10.1

// Install Docker //
sudo curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

// Create a Docker Network //
sudo docker network create moodle-tier

// Remove Existing Maria DB //
sudo docker stop mariadb
sudo docker rm mariadb
rm ~/mariadb -r

// Install MariaDB //
sudo docker run -d --name mariadb -v ~/mariadb:/var/lib/mysql -e MYSQL_ALLOW_EMPTY_PASSWORD=no -e MYSQL_ROOT_PASSWORD="supersecretmysqlpasswordhere" -e MYSQL_DATABASE=moodle -e MYSQL_USER=moodle -e MYSQL_PASSWORD="supersecretpasswordhere" --net moodle-tier --restart unless-stopped mariadb:latest

// View MariaDB Logs //
sudo docker logs mariadb

// Remove Existing Moodle //
sudo docker stop moodle
sudo docker rm moodle
rm ~/moodle -r

// Install Moodle //
docker run -d -p 80:80 -p 443:443 --name moodle -v ~/moodle:/bitnami -e MOODLE_USERNAME=cambrianadmin -e MOODLE_PASSWORD="0bb82dfc9Fc52806648b18d12d65A842" -e MOODLE_EMAIL="faculty.member@cambriancollege.ca" -e MARIADB_HOST="mariadb" -e MOODLE_DATABASE_NAME=moodle -e MOODLE_DATABASE_USER=moodle -e MOODLE_DATABASE_PASSWORD="supersecretpasswordhere" -e ALLOW_EMPTY_PASSWORD=no --net moodle-tier --restart unless-stopped bitnami/moodle:latest

// View Moodle Logs //
sudo docker logs moodle


////// Finished URL //////
https://165.22.227.128/


////// Notes //////
To connect to the mariadb server, you can use localhost, mariadb, or the public IP depending on your context.
mysql -h localhost -p 3306 -u root

Optionally add -p 3306:3306 to the docker run command for mariadb be able to connect to the mysql server from outside of the server. However, maybe consider more security first.